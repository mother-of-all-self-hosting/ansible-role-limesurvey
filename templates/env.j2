{#
SPDX-FileCopyrightText: 2023 Slavi Pantaleev
SPDX-FileCopyrightText: 2023 - 2025 Meier Lukas
SPDX-FileCopyrightText: 2025 Suguru Hirahara

SPDX-License-Identifier: Apache-2.0
#}

{#
See: https://github.com/thedevs-network/limesurvey/blob/main/.example.env
and https://github.com/thedevs-network/limesurvey/blob/main/README.md
#}

JWT_SECRET={{ limesurvey_environment_variables_jwt_secret }}

PORT={{ limesurvey_container_http_port }}
DEFAULT_DOMAIN={{ limesurvey_hostname }}
DISALLOW_REGISTRATION={{ limesurvey_environment_variables_disallow_registration | to_json }}
DISALLOW_ANONYMOUS_LINKS={{ limesurvey_environment_variables_disallow_anonymous_links | to_json }}
TRUST_PROXY={{ limesurvey_environment_variables_trust_proxy | to_json }}

{% if limesurvey_database_type == 'better-sqlite3' %}
DB_CLIENT=better-sqlite3

{% if limesurvey_database_filename %}
DB_FILENAME={{ limesurvey_database_filename }}
{% endif %}

{% endif %}

{% if limesurvey_database_type == 'mysql2' %}
DB_CLIENT=mysql2
DB_HOST={{ limesurvey_database_mysql_hostname }}
DB_PORT={{ limesurvey_database_mysql_port }}
DB_USER={{ limesurvey_database_mysql_username }}
DB_PASSWORD={{ limesurvey_database_mysql_password }}
DB_SSL={{ limesurvey_database_mysql_ssl | to_json }}
DB_NAME={{ limesurvey_database_name }}
{% endif %}

{% if limesurvey_database_type == 'pg' %}
DB_CLIENT=pg
DB_HOST={{ limesurvey_database_postgres_hostname }}
DB_PORT={{ limesurvey_database_postgres_port }}
DB_USER={{ limesurvey_database_postgres_username }}
DB_PASSWORD={{ limesurvey_database_postgres_password }}
DB_SSL={{ limesurvey_database_postgres_ssl | to_json }}
DB_NAME={{ limesurvey_database_name }}
{% endif %}

{% if limesurvey_redis_hostname %}
REDIS_ENABLED=true
REDIS_HOST={{ limesurvey_redis_hostname }}
REDIS_PORT={{ limesurvey_redis_port }}

{% if limesurvey_redis_password %}
REDIS_PASSWORD={{ limesurvey_redis_password }}
{% endif %}

REDIS_DB={{ limesurvey_redis_database }}
{% endif %}

ENABLE_RATE_LIMIT={{ limesurvey_environment_variables_enable_rate_limit | to_json }}

{% if limesurvey_environment_variables_smtp_enabled %}
MAIL_ENABLED={{ limesurvey_environment_variables_smtp_enabled | to_json }}
MAIL_HOST={{ limesurvey_environment_variables_smtp_host }}
MAIL_PORT={{ limesurvey_environment_variables_smtp_port }}

{% if limesurvey_environment_variables_smtp_user %}
MAIL_USER={{ limesurvey_environment_variables_smtp_user }}
{% endif %}

{% if limesurvey_environment_variables_smtp_password %}
MAIL_PASSWORD={{ limesurvey_environment_variables_smtp_password }}
{% endif %}

MAIL_FROM={{ limesurvey_environment_variables_smtp_from }}
MAIL_SECURE={{ limesurvey_environment_variables_smtp_secure | to_json }}

{% endif %}

REPORT_EMAIL={{ limesurvey_environment_variables_report_email }}
CONTACT_EMAIL={{ limesurvey_environment_variables_contact_email }}

{{ limesurvey_environment_variables_additional_variables }}
